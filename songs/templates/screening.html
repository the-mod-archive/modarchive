{% extends 'base_page/base.html' %}

{% block title %}
    {{ block.super }}: Screen Songs
{% endblock %}

{% block extra_css %}
    <style>
        .selected-row {
            background-color: #228B22;
            color: #fff;
        }
    </style>
{% endblock %}


{% block script %}
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const selectAllCheckbox = document.getElementById('selectAllCheckbox');
        const checkboxes = document.querySelectorAll('.song-checkbox');

        selectAllCheckbox.addEventListener('change', function () {
            checkboxes.forEach(checkbox => {
                checkbox.checked = selectAllCheckbox.checked;
            });
        });

        const rows = document.querySelectorAll('.song-row');
        rows.forEach(row => {
            row.addEventListener('click', () => {
                const checkbox = row.querySelector('.song-checkbox');
                if (!event.target.closest('.song-checkbox')) {
                    checkbox.checked = !checkbox.checked;
                }
                updateRowStyles();
            });
        });

        function updateRowStyles() {
            rows.forEach(row => {
                const checkbox = row.querySelector('.song-checkbox');
                if (checkbox.checked) {
                    row.classList.add('selected-row');
                } else {
                    row.classList.remove('selected-row');
                }
            });
        }
    });
</script>
{% endblock %}

{% block content %}

<div class="fs-2">Screen Songs</div>

<div class="container mt-5">
    <table class="table table-dark table-hover rounded">
        <thead>
            <tr>
                <th><input type="checkbox" id="selectAllCheckbox"></th>
                <th>Filename</th>
                <th>Title</th>
                <th>File Size</th>
                <th>Format</th>
            </tr>
        </thead>
        <tbody>
            {% for song in new_songs %}
                <tr class='song-row'>
                    <td>
                        <input type="checkbox" class="song-checkbox" name="selected_songs" value="{{ song.id }}">
                    </td>
                    <td>{{ song.filename }}</td>
                    <td>{{ song.title }}</td>
                    <td>{{ song.file_size }}</td>
                    <td>{{ song.format }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}